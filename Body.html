<!DOCTYPE html>
<html>

  <head>
    <title>Patient Questionnaire</title>
    <meta charset=utf-8 />
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<!--My Own CSS-->
    <link rel="stylesheet" href="themes/formatting.css" />
    <!--JQuery Mobile CSS-->
    <link rel="stylesheet" href="themes/MyTheme.css" />
    <link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
    <!--<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>-->
	<!--JQuery Mobile JavaScript-->
    <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
    <!--External scripts needed for date-picker-->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/git/jquery.mobile-git.css" />
    <link rel="stylesheet" href="https://rawgithub.com/arschmitz/jquery-mobile-datepicker-wrapper/master/jquery.mobile.datepicker.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="https://rawgithub.com/jquery/jquery-ui/1-10-stable/ui/jquery.ui.datepicker.js"></script>
    <script src="http://code.jquery.com/mobile/git/jquery.mobile-git.js"></script>
    <script src="https://rawgithub.com/arschmitz/jquery-mobile-datepicker-wrapper/master/jquery.mobile.datepicker.js"></script>
    <!--Extrenal scripts needed for knockout library-->
    <script type='text/javascript' src="http://knockoutjs.com/downloads/knockout-3.0.0.js"></script>
	<!--External scripts needed for imagemapster plugin-->
	<!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>-->
	<script src="jquery.imagemapster.js"></script>
	
  </head>

  <body>
   <div data-role="page" id="NumbnessPage" data-theme="d">
      <div data-role="header">
        <h1>Patient Survey; Body</h1>
      </div>
      <div data-role="main" class="ui-content">
        <img src="themes/myImages/NHSlogo.jpg" alt="NHS Scotland" width="85" height="52" id="nhsLogo">
        <h4>Body:</h4>
		
		 <div class="ui-grid-b">
			  <div class="ui-block-a" style="width:25%; margin-left: 40px; margin-right: 10px;">
		<div id="sensation">
		<label for="sensation"><h4>Check if you experienced any of the following:</h4></label>	
		 Numbness:
			<div class="ui-grid-a">
				<div class="ui-block-a" style="width:50%;">
					<label for="numbnessYes">Yes</label>			  
					<input type="radio" name="numbness" id="numbnessYes" value="yes" data-bind="checked:numbness"/>
				</div>
				<div class="ui-block-b" style="width:50%;">
					<label for="numbnessNo">No</label>			  
					<input type="radio" name="numbness" id="numbnessNo" value="no" data-bind="checked:numbness"/>
				</div>
			</div>
			<!--<label for="numbness">Numbness</label>	
			<input type="checkbox" data-bind="checked:numbness" value="Numbness" id="numbness"/>-->
			<label for="tingling">Tingling</label>
			<input type="checkbox" data-bind="checked:tingling" value="Tingling" id="tingling"/>
			<label for="weakness">Weakness</label>
			<input type="checkbox" data-bind="checked:weakness" value="Weakness" id="weakness"/>
			<label for="jerking">Jerking</label>
			<input type="checkbox" data-bind="checked:jerking" value="Jerking" id="jerking"/>			
		</div>
			  </div>
			<div class="ui-block-b" style="width:40%; margin-right: 10px;">
			<div id="numbnessLoc" data-bind="visible: numbness() == 'yes'">
				<IMG id="numbnessBody" SRC="themes/myImages/body.png" ALT="Site map" width="400.95" height="416.7" USEMAP="#numbnessbodyMap">	
				<map id="imgmap201461016435" name="numbnessbodyMap">
				<area shape="rect" alt="face(R)" coords="447,25,512,146" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="rect" alt="face(L)" coords="388,27,444,145" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="rect" alt="arm(L)"  coords="153,167,336,246" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="rect" alt="hand(L)" coords="23,169,131,243" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="rect" alt="arm(R)" coords="560,164,736,251" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="rect" alt="hand(R)" coords="759,165,874,247" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="poly" alt="chest(R)" coords="451,166,452,317,527,314,544,236,508,163" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="poly" alt="chest(L)" coords="441,167,442,318,368,314,353,246,375,168" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="rect" alt="leg(R)" coords="453,517,541,809" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="rect" alt="leg(L)" coords="343,518,438,807" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="rect" alt="foot(R)" coords="460,824,549,902" href="#" data-bind='click: numbnessLocValue'/>
				<area shape="rect" alt="foot(L)" coords="344,822,433,899" href="#" data-bind='click: numbnessLocValue'/>
				<!-- Created by Online Image Map Editor (http://www.maschek.hu/imagemap/index) --></map>
				</div>
				
				
				
			</div>	
				<div class="ui-block-c" style="width:15%">					
					<button class="body" type="button" id="face" value="face"></button>
					<button class="body" type="button" id="arm"  value="arm"></button>								
					<button class="body" type="button" id="hand"  value="hand"></button>
					<button class="body" type="button" id="chest"  value="hand"></button>
					<button class="body" type="button" id="leg"  value="hand"></button>		
					<button class="body" type="button" id="foot"  value="hand"></button>									
				</div>
			</div> <!--grid b-->
			
	
	
DEBUG: <pre data-bind="text: ko.toJSON($data,null,2)"></pre>
	
				
		<a data-role="button" id="done" href="#" onclick="nextPage()">Done</a>
	<a data-role="button" id="nextButton" href="#" onclick="nextPage()"></a>
    </div><!--main content-->
      <div data-role="footer" data-position="fixed">
        <h2>&copy; Edinburgh University 2014</h2>
      </div>
	</div><!--End of NumbnessPage-->
	
		
<div data-role="page" id="TinglingPage" data-theme="d">
      <div data-role="header">
        <h1>Patient Survey; Vision Problems</h1>
      </div>
      <div data-role="main" class="ui-content">
        <img src="themes/myImages/NHSlogo.jpg" alt="NHS Scotland" width="85" height="52" id="nhsLogo">
        <h4>Body:</h4>
		
		 <div class="ui-grid-b">
			  <div class="ui-block-a" style="width:25%; margin-left: 40px; margin-right: 10px;">
				<div id="sensation">
		<label for="sensation"><h4>Check if you experienced any of the following:</h4></label>
			<label for="numbness">Numbness</label>	
			<input type="checkbox" data-bind="checked:numbness" value="Numbness" id="numbness"/>
			<!--<label for="tingling">Tingling</label>
			<input type="checkbox" data-bind="checked:tingling" value="Tingling" id="tingling"/>-->
					 Tingling:
			<div class="ui-grid-a">
				<div class="ui-block-a" style="width:50%;">
					<label for="tinglingYes">Yes</label>			  
					<input type="radio" name="tingling" id="tinglingYes" value="yes" data-bind="checked:tingling"/>
				</div>
				<div class="ui-block-b" style="width:50%;">
					<label for="tinglingNo">No</label>			  
					<input type="radio" name="tingling" id="tinglingNo" value="no" data-bind="checked:tingling"/>
				</div>
			</div>
			<label for="weakness">Weakness</label>
			<input type="checkbox" data-bind="checked:weakness" value="Weakness" id="weakness"/>
			<label for="jerking">Jerking</label>
			<input type="checkbox" data-bind="checked:jerking" value="Jerking" id="jerking"/>			
		</div>
			  </div>
			<div class="ui-block-b" style="width:40%; margin-right: 10px;">
	<div id="tinglingLoc" data-bind="visible: tingling() == 'yes'">
					<IMG id="tinglingBody" SRC="themes/myImages/body.png" ALT="Site map" width="400.95" height="416.7" USEMAP="#tinglingbodyMap">	
					<map id="imgmap201461016435" name="tinglingbodyMap">
					<area shape="rect" alt="face(R)" coords="447,25,512,146" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="rect" alt="face(L)" coords="388,27,444,145" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="rect" alt="arm(L)"  coords="153,167,336,246" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="rect" alt="hand(L)" coords="23,169,131,243" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="rect" alt="arm(R)" coords="560,164,736,251" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="rect" alt="hand(R)" coords="759,165,874,247" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="poly" alt="chest(R)" coords="451,166,452,317,527,314,544,236,508,163" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="poly" alt="chest(L)" coords="441,167,442,318,368,314,353,246,375,168" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="rect" alt="leg(R)" coords="453,517,541,809" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="rect" alt="leg(L)" coords="343,518,438,807" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="rect" alt="foot(R)" coords="460,824,549,902" href="#" data-bind='click: tinglingLocValue'/>
					<area shape="rect" alt="foot(L)" coords="344,822,433,899" href="#" data-bind='click: tinglingLocValue'/>
					<!-- Created by Online Image Map Editor (http://www.maschek.hu/imagemap/index) --></map>
			
				</div>
			</div>

				
				<div class="ui-block-c" style="width:15%">					
					<button class="body" type="button" id="face" value="face"></button>
					<button class="body" type="button" id="arm"  value="arm"></button>								
					<button class="body" type="button" id="hand"  value="hand"></button>
					<button class="body" type="button" id="chest"  value="hand"></button>
					<button class="body" type="button" id="leg"  value="hand"></button>		
					<button class="body" type="button" id="foot"  value="hand"></button>									
				</div>
			</div> <!--grid b-->
			
	
	
DEBUG: <pre data-bind="text: ko.toJSON($data,null,2)"></pre>
	
				
		
	<a data-role="button" id="nextButton" href="#" onclick="nextPage()"></a>
    </div><!--main content-->
      <div data-role="footer" data-position="fixed">
        <h2>&copy; Edinburgh University 2014</h2>
      </div>
	</div><!--End of TinglingPage-->
	
	<script type='text/javascript'>
  var viewModel = {

		numbness: ko.observable(),
		numbnessLoc: ko.observableArray(),
		numbnessLocValue: function(data, element) {this.numbnessLoc.push($(element.target).attr('alt'));},
        tingling: ko.observable(false),
        tinglingLoc: ko.observableArray(),
		tinglingLocValue: function(data, element) {this.tinglingLoc.push($(element.target).attr('alt'));},
        
		weakness: ko.observable(false),
        jerking: ko.observable(false),  
	 };
	  ko.applyBindings(viewModel);
	   function nextPage() 
 {
        var currentPageID = $.mobile.activePage.attr('id');
        switch (currentPageID) 
		{
		case "NumbnessPage":
            $.mobile.changePage("#TinglingPage");
			break;

          default:
		  $.mobile.changePage("#TinglingPage");
            break;
        }
   }

$(document).ready(function()
{
$("#numbnessBody,#tinglingBody").mapster({
	singleSelect : false,
    mapKey: 'alt',
	fill : false,
	stroke : true,
	strokeColor : '000000',
	strokeWidth : 3,
	areas: [{
            key: 'foot(L)',
            strokeColor : '006600'},
        {	key: 'foot(R)',
            strokeColor : '006600' },
		{   key: 'leg(L)',
            strokeColor : 'FF0000'},
		{   key: 'leg(R)',
            strokeColor : 'FF0000'},
		{   key: 'hand(L)',
            strokeColor : '0099FF'},
		{   key: 'hand(R)',
            strokeColor : '0099FF' },
		{   key: 'arm(L)',
            strokeColor : '5C00B8' },
		{   key: 'arm(R)',
            strokeColor : '5C00B8' },
		{   key: 'chest(L)',
            strokeColor : 'FF7519' },
		{   key: 'chest(R)',
            strokeColor : 'FF7519' },
		{   key: 'face(L)',
            strokeColor : 'B800B8' },
		{   key: 'face(R)',
            strokeColor : 'B800B8' }],
				
			onClick: function(event)
			{
				var array = event.key.split("(");
				var name = array[0];
				//alert("you click on " + event.key + " " + name);
				if(event['selected']==true)
				{
					if(name=="face") 
					{
						$("#"+name).css("-moz-box-shadow", "0px 0px 10px 4px rgba(184, 0, 184, 0.75)");  
						$("#"+name).css("box-shadow", "0px 0px 10px 4px rgba(184, 0, 184, 0.75)");  
						$("#"+name).css("-webkit-box-shadow", "0px 0px 10px 4px rgba(184, 0, 184, 0.75)"); 
					}else if(name=="arm")
					{
						$("#"+name).css("-moz-box-shadow", "0px 0px 10px 4px rgba(92, 0, 184, 0.75)");  
						$("#"+name).css("box-shadow", "0px 0px 10px 4px rgba(92, 0, 184, 0.75)");  
						$("#"+name).css("-webkit-box-shadow", "0px 0px 10px 4px rgba(92, 0, 184, 0.75)"); 
					}else if(name=="hand")
					{
						$("#"+name).css("-moz-box-shadow", "0px 0px 10px 4px rgba(0, 153, 255, 0.75)");  
						$("#"+name).css("box-shadow", "0px 0px 10px 4px rgba(0, 153, 255, 0.75)");  
						$("#"+name).css("-webkit-box-shadow", "0px 0px 10px 4px rgba(0, 153, 255, 0.75)"); 
					}else if(name=="chest")
					{
						$("#"+name).css("-moz-box-shadow", "0px 0px 10px 4px rgba(255, 117, 25, 0.75");  
						$("#"+name).css("box-shadow", "0px 0px 10px 4px rgba(255, 117, 25, 0.75)");  
						$("#"+name).css("-webkit-box-shadow", "0px 0px 10px 4px rgba(255, 117, 25, 0.75"); 
					}else if(name=="leg")
					{
						$("#"+name).css("-moz-box-shadow", "0px 0px 10px 4px rgba(255, 0, 0, 0.75)");  
						$("#"+name).css("box-shadow", "0px 0px 10px 4px rgba(255, 0, 0, 0.75)");  
						$("#"+name).css("-webkit-box-shadow", "0px 0px 10px 4px rgba(255, 0, 0, 0.75)"); 
					}else 
					{
						$("#"+name).css("-moz-box-shadow", "0px 0px 10px 4px rgba(0, 102, 0, 0.75)");  
						$("#"+name).css("box-shadow", "0px 0px 10px 4px rgba(0, 102, 0, 0.75)");  
						$("#"+name).css("-webkit-box-shadow", "0px 0px 10px 4px rgba(0, 102, 0, 0.75)"); 
					}
				}else
				{
					$("#"+name).css("-moz-box-shadow", "none");
					$("#"+name).css("box-shadow", "none");
					$("#"+name).css("-webkit-box-shadow", "none");
				}
			}					
});

 });
 



   
</script>
  </body>
  </html>