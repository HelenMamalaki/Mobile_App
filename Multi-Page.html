<!DOCTYPE html>
<html>

  <head>
    <title>Patient Questionnaire</title>
    <meta charset=utf-8 />
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<!--My Own CSS-->
    <link rel="stylesheet" href="themes/formatting.css" />
    <!--JQuery Mobile CSS-->
    <link rel="stylesheet" href="themes/MyTheme.css" />
    <link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
    <!--JQuery js-->
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <!--JQuery Mobile js-->
    <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
    <!--External scripts needed for date-picker-->
<!-- <link rel="stylesheet" href="http://code.jquery.com/mobile/git/jquery.mobile-git.css" />
    <link rel="stylesheet" href="https://rawgithub.com/arschmitz/jquery-mobile-datepicker-wrapper/master/jquery.mobile.datepicker.css" />-->
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.0/themes/base/jquery-ui.css"/>  
    <script src="https://rawgithub.com/jquery/jquery-ui/1-10-stable/ui/jquery.ui.datepicker.js"></script>
    <script src="http://code.jquery.com/mobile/git/jquery.mobile-git.js"></script>
    <script src="https://rawgithub.com/arschmitz/jquery-mobile-datepicker-wrapper/master/jquery.mobile.datepicker.js"></script>
    <!--Extrenal scripts needed for knockout library-->
    <script type='text/javascript' src="http://knockoutjs.com/downloads/knockout-3.0.0.js"></script>

  </head>

  <body>
    <div data-role="page" id="WelcomePage" data-theme="d">
      <div data-role="header">
        <h1>Patient Survey; Welcome</h1>
      </div>
      <div data-role="main" class="ui-content">
        <img src="themes/myImages/NHSlogo.jpg" alt="NHS Scotland" width="85" height="52" id="nhsLogo">
        <h1>Patient Survey</h1>
        <h4>In order to speed up your assesment we would like to electronically record part of your medical history and recent symptoms. We hope you'll take the time to answer the following questions.</h4>
        <br>
        <h2>Consent</h2>
        <h4>The information collected here will be linked to other information on your medical record. All information collected will remain strictly confidential. Information will be used for no other purpose than medical research.</h4>
        <div data-role="fieldcontain">
          <div style="width:47%;">
            <input type="checkbox" data-bind="checked:consent" name="consent" id="consent">
            <label for="consent" style='font-size:18px;'>I agree to the collection of my information</label>
          </div>
        </div>
        <a data-role="button" class="nextButton" data-bind="visible: consent()" href="#" ></a>
      </div>
      <!--main content-->
      <div data-role="footer" data-position="fixed">
        <h2>&copy; Edinburgh University 2014</h2>
      </div>
    </div><!--End of Page 1-->  
	
    <div data-role="page" id="IdentificationPage" data-theme="d">
      <div data-role="header">
        <h1>Patient Survey; Personal Details</h1>
      </div>
      <div data-role="main" class="ui-content">
        <img src="themes/myImages/NHSlogo.jpg" alt="NHS Scotland" width="85" height="52" id="nhsLogo">
        <h1>Personal Details</h1>
        <div id="DOB">
          <label for="DOB">Date of Birth:</label>
		  <div class="ui-grid-b">
			  <div class="ui-block-a" style="width:20%; margin-left: 40px; margin-right: 10px;">
				<label for="day">Day</label>
				<input name="day" id="day" placeholder="DD" value="" type="text">
			  </div>
			  <div class="ui-block-b" style="width:20%; margin-right: 10px;">
				<label for="Month">Month</label>
				<input name="month" id="month" placeholder="MM" value="" type="text">
			  </div>
			  <div class="ui-block-c" style="width:30%">
				<label for="year">Year</label>
				<input name="year" id="year" placeholder="YYYY" value="" type="text">
			  </div>
			</div> <!--grid b-->
        </div>
        <div data-role="fieldcontain">
          <legend>Gender:</legend>
          <div class="ui-grid-a">
            <div class="ui-block-a" style="width:20%; margin-left: 40px; margin-right: 10px;">
              <input type="radio" name="gender" id="female" value="female" />
              <br>
              <label for="female">Female</label>
            </div>
            <div class="ui-block-b" style="width:20%;">
              <input type="radio" name="gender" id="male" value="male" />
              <br>
              <label for="male">Male</label>
            </div>
          </div>
        </div>
        <div id="indent">
          <legend>Who is filling out this survey:</legend>
          <div style="margin-left: 40px;">
            <select name="who_fillIn_survey" id="who_fillIn_survey">
              <option value="Patient">Patient</option>
              <option value="Relative">Relative</option>
              <option value="Carer">Carer</option>
              <option value="NHS staff">NHS staff</option>
              <option value="Other">Other</option>
            </select>
          </div>
        </div>
        <a data-role="button" class="nextButton" href="#" ></a>
      </div>
      <!--main content-->
      <div data-role="footer" data-position="fixed">
        <h2>&copy;Edinburgh University 2014</h2>
      </div>
    </div>
    <!--End of Page 2-->
    <div data-role="page" id="SymptomsPage" data-theme="d">
      <div data-role="header">
        <h1>Patient Survey; Symptoms</h1>
      </div>
      <div data-role="main" class="ui-content">
        <img src="themes/myImages/NHSlogo.jpg" alt="NHS Scotland" width="85" height="52" id="nhsLogo">
        <form action="#" method="get">
          <div id="datepicker" data-role="fieldcontain">
            <h3>When did you first have symptoms?</h3>
            <div class="ui-grid-a">
              <div class="ui-block-a" style="width:20%; margin-left: 40px; margin-right: 30px;">
		<!--<input type="date" name="date" id="date" value=""/>-->
                <input type="text" class="date-input" data-inline="false" data-role="date" readonly="readonly">
              </div>
              <div class="ui-block-b" style="width:35%;">
                <input type="checkbox" data-bind="checked:estDate" name="estDate" id="symptomOnsetDate">
                <label for="symptomOnsetDate">I don't remember the exact date</label>
              </div>
            </div>
          </div>
        </form>
        <div id="dynamicContent" data-bind="visible:estDate()">
          <h4>How long ago was it before your first attack of symptoms?</h4>
          <div class="ui-grid-a">
            <div class="ui-block-a" style="width:10%; margin-left: 40px; margin-right: 30px;">
              <input name="symptom_onset" id="symptom_onset" placeholder="0" value="" type="number">
            </div>
            <div class="ui-block-b" style="width:25%;">
              <select name="symptom_onset" id="symptom_onset">
                <option value="days">days</option>
                <option value="weeks">weeks</option>
                <option value="months">months</option>
                <option value="years">years</option>
              </select>
            </div>
          </div>
        </div>
		
        <div id="frequency">
          <h3>How many attacks of symptoms have you had?</h3>
          <div class="ui-grid-a">
            <div class="ui-block-a" style="width:10%; margin-left: 40px; margin-right: 30px;">
              <input name="frequency" id="frequency" placeholder="1" value="" type="number">
            </div>
            <div class="ui-block-b" style="width:25%;">
              <input type="checkbox" name="can't_remember" id="can't_remember" value="male" />
              <br>
              <label for="can't_remember">I don't remeber</label>
            </div>
          </div>
        </div>
        <div id="duration">
          <h3>How long did the symptoms last in your last attack?</h3>
          <div class="ui-grid-a">
            <div class="ui-block-a" style="width:10%; margin-left: 40px; margin-right: 10px;">
              <input name="duration" id="duration" placeholder="0" value="" type="number">
            </div>
            <div class="ui-block-b" style="width:20%;">
              <select name="time_unit" id="time_unit">
                <option value="sec">sec</option>
                <option value="min">min</option>
                <option value="hours">hrs</option>
                <option value="days">days</option>
              </select>
            </div>
          </div>
        </div>
        <a data-role="button" class="nextButton" href="#" ></a>
      </div>
      <!--main content-->
      <div data-role="footer" data-position="fixed">
        <h2>&copy; Edinburgh University 2014</h2>
      </div>
    </div>
    <!--End of Page 3-->
	
	 <div data-role="page" id="SpeechProblemsPage" data-theme="d">
      <div data-role="header">
        <h1>Patient Survey; Speech Problems</h1>
      </div>
      <div data-role="main" class="ui-content">
        <img src="themes/myImages/NHSlogo.jpg" alt="NHS Scotland" width="85" height="52" id="nhsLogo">
        <h1>Speech Problems</h1>
        <h3>In your last attack, did you experience:</h3>
       <div class="ui-grid-b">
			<h3>Slurred speech?</h3>
			<div class="ui-block-a" style="width:20%; margin-left: 40px; margin-right: 10px;">	
				<label for="slurredYes">Yes</label>			  
				<input type="radio" name="slurred" id="slurredYes" value="yes"/>
			</div>
			<div class="ui-block-b" style="width:20%; margin-right: 10px;">
				<label for="slurredNo">No</label>
				<input type="radio" name="slurred" id="slurredNo" value="no"/>
			</div>
			<div class="ui-block-c" style="width:20%">
				<label for="slurredDunno">I don't know</label>
				<input type="radio" name="slurred" id="slurredDunno" value="I don't know"/>
			</div>
		</div><!--grib b-->
		
       <div class="ui-grid-b">
			<p>Difficulty understanding words?</p>
			<div class="ui-block-a" style="width:20%; margin-left: 40px; margin-right: 10px;">	
				<label for="speakingYes">Yes</label>			  
				<input type="radio" name="speaking" id="speakingYes" value="yes"/>
			</div>
			<div class="ui-block-b" style="width:20%; margin-right: 10px;">
				<label for="speakingNo">No</label>
				<input type="radio" name="speaking" id="speakingNo" value="no"/>
			</div>
			<div class="ui-block-c" style="width:20%">
				<label for="speakingDunno">I don't know</label>
				<input type="radio" name="speaking" id="speakingDunno" value="I_don't_know"/>
			</div>
		</div><!--grib b-->
		
		<div class="ui-grid-b">
			<p>Difficulty understanding words?</p>
			<div class="ui-block-a" style="width:20%; margin-left: 40px; margin-right: 10px;">	
				<label for="understandingYes">Yes</label>			  
				<input type="radio" name="understanding" id="understandingYes" value="yes"/>
			</div>
			<div class="ui-block-b" style="width:20%; margin-right: 10px;">
				<label for="understandingNo">No</label>
				<input type="radio" name="understanding" id="understandingNo" value="no"/>
			</div>
			<div class="ui-block-c" style="width:20%">
				<label for="understandingDunno">I don't know</label>
				<input type="radio" name="understanding" id="understandingDunno" value="I don't know"/>
			</div>
		</div><!--grib b--> 
		
        <a data-role="button" class="nextButton" data-bind="visible: consent()" href="#" ></a>
 DEBUG:
        <pre data-bind="text: ko.toJSON($data,null,2)"></pre>
      </div><!--main content-->
      <div data-role="footer" data-position="fixed">
        <h2>&copy; Edinburgh University 2014</h2>
      </div>
    </div><!--End of SpeechProblemsPage-->
	
  

    <!--End of Page 4-->
    <script type='text/javascript'>

$( ".data-input" ).datepicker({ defaultDate: null });
      var viewModel = {
        consent: ko.observable(false),
        id: ko.observable(),
        respondent: ["Patient", "Relative", "Carer", "NHS Staff", "Other"],
        respodentValue: ko.observable("Patient"),
        exactDate: ko.observable(),
        estDate: ko.observable(),
        attackNo: ko.observable(),
        attackDuration: ko.observable(),
        durationUnit: ["sec", "min", "hrs", "days"],
        durationUnitValue: ko.observable("sec"),
        numbness: ko.observable(false),
        numbnessLocation: ko.observableArray([]),
        tingling: ko.observable(false),
        tinglingLocation: ko.observableArray([]),
        weakness: ko.observable(false),
        weaknessLocation: ko.observableArray([]),
        jerking: ko.observable(false),
        jerkingLocation: ko.observableArray([]),
        tremor: ko.observable(false),
        tremorLocation: ko.observableArray([]),
        pain: ko.observable(false),
        painLocation: ko.observableArray([]),
        slurredSpeech: ko.observable(),
        speakingDifficulty: ko.observable(),
        wordComprehension: ko.observable(),
        lightHeaded: ko.observable(),
        vertigo: ko.observable(),
        visionLoss: ko.observable(),
        partialVisionLoss: ko.observable(),
        visionTest: ko.observable(),
        sparkly: ko.observable(),
        symptemOnset: ko.observable(),
        otherSymptoms: ko.observable(),
        vomiting: ko.observable(),
        collapse: ko.observable(),
        memoryLoss: ko.observable(),
        doubleVision: ko.observable(),
        heartPalpatations: ko.observable(),
        heartAttack: ko.observable(),
        stroke: ko.observable(),
        cancer: ko.observable(),
        epilepsy: ko.observable(),
        pairs: ko.observable(),
        rt: ko.observable()
      };
      ko.applyBindings(viewModel);

 $(document).ready(function() {
	$(".nextButton").on('click', nextPage);
      }); //document ready

      function nextPage() {
        var currentPageID = $.mobile.activePage.attr('id');
        switch (currentPageID) {
          case "WelcomePage":
            $.mobile.changePage("#SymptomsPage");
            break;
          case "IdentificationPage":
            $.mobile.changePage("#SymptomsPage");
            break;
          case "SymptomsPage":
            $.mobile.changePage("#SpeechProblemsPage");
            break;
 	  case "SpeechProblemsPage":
            $.mobile.changePage("#VisionProblemsPage");
            break;
	  case "VisionProblemsPage":
            $.mobile.changePage("#BodyPage");
            break;
          default:
            break;
        }
      }
    </script>
  </body>

</html>